<h1><%= t('admin.comments.index.title') %></h1>

<% if @comments.any? %>
  <table>
    <thead>
      <tr>
        <th><%= t('labels.user') %></th>
        <th><%= t('labels.content') %></th>
        <th><%= t('labels.locale') %></th>
        <th><%= t('labels.source') %></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @comments.each do |comment| %>
        <tr>
          <td><%= comment.user.name %></td>
          <td><%= truncate(comment.body, length: 120) %></td>
          <td><%= comment.locale.upcase %></td>
          <td>
            <% if comment.commentable.is_a?(News) %>
              <%= link_to t('labels.news'), admin_news_path(comment.commentable) %>
            <% else %>
              <%= link_to t('labels.video'), admin_video_path(comment.commentable) %>
            <% end %>
          </td>
          <td>
            <%= button_to t('actions.approve'), admin_comment_path(comment, status: 'approved'), method: :patch %>
            <%= button_to t('actions.reject'), admin_comment_path(comment, status: 'rejected'), method: :patch %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p><%= t('admin.comments.index.empty') %></p>
<% end %>
